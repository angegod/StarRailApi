(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{255:(e,t,a)=>{"use strict";function s(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return s}}),a(5155),a(7650),a(5744),a(589)},2146:(e,t,a)=>{"use strict";function s(e){let{reason:t,children:a}=e;return a}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}}),a(5262)},3471:(e,t,a)=>{"use strict";a.d(t,{default:()=>g});var s=a(5155),l=a(9550),r=a(2540),n=a(2115),i=a(5695);a(9193),a(4125);var x=a(7665),c=a(7901),d=a(8390),o=a(1582),m=a(8637),f=a(3848);let u=function(){return(0,s.jsxs)("div",{className:"flex flex-col max-w-[230px] ",children:[(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"text-white font-bold text-md",children:"使用方法"})}),(0,s.jsxs)("div",{className:"[&>span]:text-stone-400 flex flex-col",children:[(0,s.jsx)("span",{children:"根據遺器現有狀況"}),(0,s.jsx)("span",{children:"依序輸入詞條種類、詞條數值、強化次數"}),(0,s.jsx)("span",{className:"!text-yellow-500",children:"詞條數值不用輸入%"}),(0,s.jsx)("span",{className:"!text-yellow-500",children:"如果該詞條沒有被強化過，則強化次數打上0即可"})]}),(0,s.jsxs)("div",{className:"mt-2 [&>span]:text-stone-400 flex flex-col",children:[(0,s.jsx)("span",{children:"例如:今天有一個詞條為"}),(0,s.jsx)("span",{className:"!text-green-500",children:"暴擊傷害 13.4% 2"}),(0,s.jsx)("span",{children:"那麼只要key上"}),(0,s.jsx)("span",{className:"!text-green-500",children:"暴擊傷害 13.4 2"})]}),(0,s.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,s.jsx)("span",{className:"text-white font-bold text-md",children:"注意事項:"}),(0,s.jsx)("span",{className:"text-red-500",children:"1.副詞條彼此間不能重複"}),(0,s.jsx)("span",{className:"text-red-500",children:"2.主詞條跟副詞條不可重複"})]})]})},h=function(){return(0,s.jsxs)("div",{className:"w-[300px] flex flex-col max-[600px]:my-3",children:[(0,s.jsx)("h2",{className:"text-red-600 font-bold text-lg",children:"使用說明"}),(0,s.jsxs)("ul",{className:"[&>li]:text-white list-decimal [&>li]:ml-2 max-[400px]:[&>li]:text-sm",children:[(0,s.jsx)("li",{children:"此工具主要目的是給予一些想要重洗詞條的人參考"}),(0,s.jsx)("li",{children:"翻盤機率是指說該遺器透過變量骰子後遺器分數變高的機率為何"}),(0,s.jsx)("li",{children:"目前遺器只支援計算五星遺器"}),(0,s.jsx)("li",{children:"此工具相關數據仍有更改的可能，敬請見諒!"}),(0,s.jsxs)("li",{children:["操作說明可以參考",(0,s.jsx)("a",{href:"https://home.gamer.com.tw/artwork.php?sn=6065608",className:"!underline",children:"這篇"})]})]})]})};var p=a(7525),j=a(5424),w=a(9779),v=a(4422),b=a(4540),N=a(315);let g=function(){let[e,t]=(0,n.useState)(void 0),[g,y]=(0,n.useState)(),[S,_]=(0,n.useState)(void 0),[I,O]=(0,n.useState)(void 0),[D,P]=(0,n.useState)({color:void 0,rank:void 0}),[A,k]=(0,n.useState)(void 0),[H,E]=(0,n.useState)(!0),M=(0,n.useRef)([]),R=(0,n.useRef)([]),[C,B]=(0,n.useState)(void 0),[T,J]=(0,n.useState)(void 0),[L,F]=(0,n.useState)([]),[X,q]=(0,n.useState)({}),{showStatus:$,updateStatus:U,hideStatus:W}=(0,v.Z)(),[z,G]=(0,n.useState)(),Q=(0,b.wA)(),V=(0,b.d4)(e=>e.history.historyData),[Z,K]=(0,n.useState)(!1),Y=["Head 頭部","Hand 手部","Body 軀幹","Feet 腳部","Ball 位面球","Rope 連結繩"],[ee,et]=(0,n.useState)(!1),[ea,es]=(0,n.useState)(!0),el=(0,i.usePathname)();(0,n.useEffect)(()=>{K(!1),Q((0,N.eU)()),R.current=[];for(var e=0;e<=3;e++){let t={index:e,subaffix:0,data:0,count:0};R.current.push(t)}let t=JSON.parse(localStorage.getItem("HistoryData"));t&&($("正在載入過往紀錄中......"),null!=t&&t.length>0?(t=t.filter(e=>"1.3"===e.version),localStorage.setItem("HistoryData",JSON.stringify(t)),Q((0,N.nS)(t)),U("先前紀錄已匯入!!","success")):U("尚未有任何操作紀錄!!","default"),K(!0))},[el]),(0,n.useEffect)(()=>{void 0!==e&&Number.isInteger(e)&&y(l.A.find(t=>t.id===parseInt(e)).main[0])},[e]);let er={charID:C,standDetails:M.current,partArr:Y,historyData:V,isChangeAble:ea,selfStand:L,partsIndex:e,MainSelectOptions:g,SubData:R,simulatorData:X,relic:z,isLoad:Z,mode:"Simulator",Rscore:I,Rrank:D,ExpRate:S,PieNums:T,checkDetails:function(e){let t=V[e];P(t.rank),_(t.expRate),O(t.score),U("資料替換完畢!!","success"),J(t.pieData),M.current=t.stand,G(t.relic),q({}),requestAnimationFrame(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})},simulate:function(){let e=!0,t=new Worker(a.tu(new URL(a.p+a.u(682),a.b))),s=x.A.find(e=>e.name===z.main_affix),l=[];z.subaffix.forEach((e,t)=>{let a={index:t,subaffix:x.A.find(t=>t.name===e.subaffix).name,data:e.data,count:e.count};l.push(a)}),L.forEach(t=>{""===t.value&&(e=!1,U("加權指數不可為空或其他非法型式","error"))});let r={MainData:s.name,SubData:l,partsIndex:z.type,standard:M.current,deviation:.5};e&&(t.postMessage(r),t.onmessage=function(e){q({oldData:{relicscore:I,relicrank:D,returnData:l},newData:e.data}),requestAnimationFrame(()=>{window.scrollTo({top:document.getElementById("enchant").offsetTop,behavior:"smooth"})})}),es(!0)},deleteHistoryData:function(e){let t=V.filter((t,a)=>a!==e);Q((0,N.SB)(e)),$("正在處理中......"),setTimeout(()=>{U("成功刪除該紀錄!!","success")},0),localStorage.setItem("HistoryData",JSON.stringify(t))},setCharID:B,setIsChangeAble:es,setIsSaveAble:et,setSelfStand:F,setPartsIndex:t,setMainSelectOptions:y,setStatusMsg:k};return(0,s.jsxs)(w.A.Provider,{value:er,children:[(0,s.jsxs)("div",{className:"w-4/5 mx-auto max-[600px]:w-[90%] flex flex-row flex-wrap",children:[(0,s.jsxs)("div",{className:"flex flex-col w-2/5 bg-[rgba(0,0,0,0.5)] p-2 rounded-md max-[1200px]:w-full",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)("h1",{className:"text-red-600 font-bold text-2xl",children:"遺器重洗模擬器"}),(0,s.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"SimulatorHint",children:(0,s.jsx)("span",{className:"text-white",children:"?"})})]}),(0,s.jsx)("div",{className:"flex flex-row flex-wrap",children:(0,s.jsx)("div",{className:"flex flex-row flex-wrap w-1/2 max-[1200px]:w-[100%]",children:(0,s.jsxs)("div",{className:"flex flex-col mt-2",children:[(0,s.jsxs)("div",{className:"flex flex-row [&>*]:mr-2 my-3 items-center max-[400px]:!flex-col max-[400px]:items-start",children:[(0,s.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,s.jsx)("span",{className:"text-white",children:"Characters 腳色:"})}),(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)(f.zj,{}),(0,s.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"CharHint",children:(0,s.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,s.jsxs)("div",{className:"my-1 mt-2 [&>*]:mr-2 flex flex-row max-[400px]:!flex-col max-[400px]:items-start",children:[(0,s.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,s.jsx)("span",{className:"text-white",children:"Parts 部位:"})}),(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[(0,s.jsx)(f.q2,{}),(0,s.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"PartSelectHint",children:(0,s.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,s.jsxs)("div",{className:"my-1 ".concat(Number.isInteger(parseInt(e))?"":"hidden"," mt-2 [&>*]:mr-2 flex flex-row max-[400px]:items-start max-[400px]:!flex-col"),children:[(0,s.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,s.jsx)("span",{className:"text-white",children:"Main 主屬性:"})}),(0,s.jsx)("div",{className:"flex flex-row items-center",children:(0,s.jsx)(f.Q2,{})})]}),(0,s.jsxs)("div",{className:"my-1 ".concat(void 0!==g&&"undefined"!==g&&void 0!==e?"":"hidden"," mt-2 [&>*]:mr-2 flex flex-row max-[600px]:!flex-col max-[600px]:text-center max-[400px]:text-left"),children:[(0,s.jsx)("div",{className:"text-right w-[200px] max-[600px]:w-[100%] max-[600px]:text-center max-[400px]:text-left",children:(0,s.jsx)("span",{className:"text-white",children:"SubAffix 副屬性:"})}),(0,s.jsxs)("div",{className:"flex flex-row items-start justify-center",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(f.$X,{index:0}),(0,s.jsx)(f.$X,{index:1}),(0,s.jsx)(f.$X,{index:2}),(0,s.jsx)(f.$X,{index:3})]}),(0,s.jsx)("div",{className:"hintIcon ml-1 mt-1 overflow-visible","data-tooltip-id":"SubAffixHint",children:(0,s.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,s.jsxs)("div",{className:"mt-4 [&>*]:mr-2 flex flex-row items-baseline max-[400px]:!flex-col ".concat(void 0===e?"hidden":""),children:[(0,s.jsx)("div",{className:"text-right w-[200px]  max-[400px]:text-left max-[600px]:w-[120px]",children:(0,s.jsx)("span",{className:"text-white",children:"Affix 有效詞條:"})}),(0,s.jsx)("div",{className:"flex flex-row items-center",children:(0,s.jsx)(f.mM,{})})]}),(0,s.jsxs)("div",{className:"mt-2 [&>*]:mr-2 flex flex-row max-[400px]:!flex-col ".concat(0===L.length?"hidden":""),children:[(0,s.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,s.jsx)("span",{className:"text-white",children:"Params 參數:"})}),(0,s.jsx)(d.Q,{})]}),(0,s.jsx)("div",{className:"".concat(Number.isInteger(parseInt(e))?"":"hidden"," mt-2 mb-2 max-w-[400px] flex flex-row [&>*]:mr-2 justify-end max-[400px]:justify-start"),children:(0,s.jsxs)("div",{className:"flex flex-row mt-1",children:[(0,s.jsx)("button",{className:"processBtn mr-2 whitespace-nowrap",onClick:()=>(function(){let t=!1;if(!C){t=!0,U("沒有選擇任何腳色!!","error");return}if(R.current.some((e,a)=>e.subaffix===g?(U("第".concat(a+1,"個詞條:副詞條不可選擇與主詞條相同的詞條\n請再重新選擇!!"),"error"),t=!0,!0):"undefined"===e.subaffix||0===e.subaffix?(U("您還有副詞條沒有選擇\n請再重新選擇!!","error"),t=!0,!0):void 0),t)return;let s=new Set;for(let e of R.current){if(s.has(e.subaffix)){alert("副詞條之間不可以選擇重複\n請再重新選擇!!"),t=!0;return}s.add(e.subaffix)}if(L.forEach(e=>{""===e.value&&(t=!0,alert("加權指數不可為空或其他非法型式"))}),t)return;let l=R.current.includes(e=>"spd"===e.subaffix)?.5*L.find(e=>"速度"===e.name).value:0;R.current.forEach(e=>{"spd"!==e.subaffix&&0!==e.count&&(l+=.2)});let r=new Worker(a.tu(new URL(a.p+a.u(444),a.b))),n={charID:C,MainData:g,SubData:R.current,partsIndex:e,standard:L,deviation:l};et(!1),E(!1),es(!1),$("數據計算處理中!!"),_(void 0),P({color:void 0,rank:void 0}),J(void 0),O(void 0),G(void 0),r.postMessage(n),r.onmessage=function(t){let a;_(t.data.expRate),O(t.data.relicscore),U("計算完畢!!","success"),J(t.data.returnData),P(t.data.relicrank),a={main_affix:g,subaffix:[]},R.current.forEach((e,t)=>{["生命值","攻擊力","防禦力","速度"].includes(e.subaffix)?e.display=e.data:e.display=e.data+"%"}),a.subaffix=JSON.parse(JSON.stringify(R.current)),a.type=parseInt(e),G(a),M.current=L,E(!0),et(!0),es(!0),requestAnimationFrame(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}),q({})}})(),disabled:!H,children:"計算分數"}),(0,s.jsx)("button",{className:"processBtn mr-2 whitespace-nowrap",onClick:()=>(function(){let t=Y[e-1],a=r.A.find(e=>e.charID===C);if(V?V.length>=6&&Q((0,N._0)()):Q((0,N.nS)([])),!T||void 0===S||!D||void 0===I)return void U("當前沒有任何數據，不予儲存!!","error");if(!C)return void U("沒有選擇任何腳色!!","error");z.type=parseInt(e);let s={version:"1.3",char:a,part:t,mainaffix:g,expRate:S,score:I,rank:D,pieData:T,stand:M.current,relic:z},l=JSON.parse(JSON.stringify(V));Q((0,N.Gs)(s)),U("已儲存","success"),document.getElementById("historyData").scrollIntoView({behavior:"smooth"}),l.push(s),localStorage.setItem("HistoryData",JSON.stringify(l)),et(!1)})(),disabled:!ee,children:"儲存紀錄"})]})})]})})})]}),(0,s.jsxs)("div",{className:"w-[55%] ml-2 bg-[rgba(0,0,0,0.5)] rounded-md p-2 h-fit max-[1200px]:w-[100%] max-[1200px]:ml-0 max-[1200px]:mt-2",id:"historyData",children:[(0,s.jsxs)("div",{className:"flex flex-row items-baseline px-2 max-[600px]:justify-center",children:[(0,s.jsx)("span",{className:"text-red-600 text-lg font-bold",children:"過往紀錄"}),(0,s.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"HistoryHint",children:(0,s.jsx)("span",{className:"text-white",children:"?"})})]}),(0,s.jsx)("div",{className:"flex flex-row flex-wrap h-max max-h-[300px] overflow-y-scroll hiddenScrollBar max-[600px]:!flex-col max-[600px]:!flex-nowrap max-[600px]:items-center",children:(0,s.jsx)(m.a,{})})]}),(0,s.jsx)("div",{className:"flex flex-row my-3 flex-wrap shadowBox bg-[rgba(0,0,0,0.5)] w-full p-2 ".concat(void 0===T?"hidden":""," rounded-md"),children:(0,s.jsxs)("div",{className:"w-full flex flex-row flex-wrap ".concat(void 0===T?"hidden":""),children:[(0,s.jsx)("div",{className:"flex flex-row flex-wrap w-[18vw]  max-[700px]:w-[50%] ".concat(void 0===T?"hidden":""," max-[500px]:w-4/5 max-[500px]:mx-auto"),children:(0,s.jsx)(o.v,{mode:"Simulator",button:!0})}),(0,s.jsx)("div",{className:"w-1/4 max-[700px]:w-[50%] ".concat(void 0===T?"hidden":""," max-[500px]:w-4/5 max-[500px]:mx-auto"),children:(0,s.jsx)(d.V,{})}),(0,s.jsx)("div",{className:"flex flex-row flex-wrap w-1/2 max-[700px]:w-[100%] max-[500px]:w-4/5 max-[500px]:mx-auto ",id:"resultDetails",children:(0,s.jsx)(c.A,{})})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(j.m_,{id:"CharHint",place:"right-start",render:()=>(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-white",children:"選擇指定腳色，可以使用中文或英文關鍵字"}),(0,s.jsx)("span",{className:"text-white",children:"例如:Jingliu→鏡流"})]})}),(0,s.jsx)(j.m_,{id:"PartSelectHint",place:"right-start",render:()=>(0,s.jsxs)("div",{className:"flex flex-col max-w-[230px]",children:[(0,s.jsx)("span",{className:"text-white",children:"選擇遺器部位"}),(0,s.jsx)("span",{className:"text-white",children:'"主詞條"跟"副詞條"區塊中會自動帶入該部位詞條種類'})]})}),(0,s.jsx)(j.m_,{id:"SubAffixHint",place:"right-start",render:()=>(0,s.jsx)(u,{})}),(0,s.jsx)(j.m_,{id:"HistoryHint",place:"top-center",render:()=>(0,s.jsx)(p.A,{})}),(0,s.jsx)(j.m_,{id:"SimulatorHint",place:"right-start",render:()=>(0,s.jsx)(h,{}),clickable:!0})]})]})}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{bindSnapshot:function(){return n},createAsyncLocalStorage:function(){return r},createSnapshot:function(){return i}});let a=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class s{disable(){throw a}getStore(){}run(){throw a}exit(){throw a}enterWith(){throw a}static bind(e){return e}}let l="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function r(){return l?new l:new s}function n(e){return l?l.bind(e):s.bind(e)}function i(){return l?l.snapshot():function(e,...t){return e(...t)}}},4125:()=>{},5028:(e,t,a)=>{"use strict";a.d(t,{default:()=>l.a});var s=a(6645),l=a.n(s)},5744:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return s.workAsyncStorageInstance}});let s=a(7828)},6645:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let s=a(8229)._(a(7357));function l(e,t){var a;let l={};"function"==typeof e&&(l.loader=e);let r={...l,...t};return(0,s.default)({...r,modules:null==(a=r.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7357:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return x}});let s=a(5155),l=a(2115),r=a(2146);function n(e){return{default:e&&"default"in e?e.default:e}}a(255);let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},x=function(e){let t={...i,...e},a=(0,l.lazy)(()=>t.loader().then(n)),x=t.loading;function c(e){let n=x?(0,s.jsx)(x,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?l.Suspense:l.Fragment,d=t.ssr?(0,s.jsxs)(s.Fragment,{children:[null,(0,s.jsx)(a,{...e})]}):(0,s.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(a,{...e})});return(0,s.jsx)(c,{...i?{fallback:n}:{},children:d})}return c.displayName="LoadableComponent",c}},7828:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return s}});let s=(0,a(4054).createAsyncLocalStorage)()},9862:(e,t,a)=>{Promise.resolve().then(a.bind(a,3471))}},e=>{var t=t=>e(e.s=t);e.O(0,[8,60,935,388,994,874,337,328,441,684,358],()=>t(9862)),_N_E=e.O()}]);