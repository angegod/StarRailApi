(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{255:(e,t,s)=>{"use strict";function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),s(5155),s(7650),s(5744),s(589)},2146:(e,t,s)=>{"use strict";function a(e){let{reason:t,children:s}=e;return s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),s(5262)},3752:(e,t,s)=>{Promise.resolve().then(s.bind(s,7777))},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return r},createSnapshot:function(){return n}});let s=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw s}getStore(){}run(){throw s}exit(){throw s}enterWith(){throw s}static bind(e){return e}}let l="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function r(){return l?new l:new a}function i(e){return l?l.bind(e):a.bind(e)}function n(){return l?l.snapshot():function(e,...t){return e(...t)}}},4125:()=>{},5028:(e,t,s)=>{"use strict";s.d(t,{default:()=>l.a});var a=s(6645),l=s.n(a)},5744:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=s(7828)},6645:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=s(8229)._(s(7357));function l(e,t){var s;let l={};"function"==typeof e&&(l.loader=e);let r={...l,...t};return(0,a.default)({...r,modules:null==(s=r.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7357:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return x}});let a=s(5155),l=s(2115),r=s(2146);function i(e){return{default:e&&"default"in e?e.default:e}}s(255);let n={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},x=function(e){let t={...n,...e},s=(0,l.lazy)(()=>t.loader().then(i)),x=t.loading;function c(e){let i=x?(0,a.jsx)(x,{isLoading:!0,pastDelay:!0,error:null}):null,n=!t.ssr||!!t.loading,c=n?l.Suspense:l.Fragment,d=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(c,{...n?{fallback:i}:{},children:d})}return c.displayName="LoadableComponent",c}},7777:(e,t,s)=>{"use strict";s.d(t,{default:()=>S});var a=s(5155),l=s(3348),r=s(8326),i=s(2115),n=s(5695);s(9193),s(4125);var x=s(6719),c=s(5110),d=s(2224),o=s(9988),f=s(3571);let m=function(){return(0,a.jsxs)("div",{className:"flex flex-col max-w-[230px] ",children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-white font-bold text-md",children:"使用方法"})}),(0,a.jsxs)("div",{className:"[&>span]:text-stone-400 flex flex-col",children:[(0,a.jsx)("span",{children:"根據遺器現有狀況"}),(0,a.jsx)("span",{children:"依序輸入詞條種類、詞條數值、強化次數"}),(0,a.jsx)("span",{className:"!text-yellow-500",children:"詞條數值不用輸入%"}),(0,a.jsx)("span",{className:"!text-yellow-500",children:"如果該詞條沒有被強化過，則強化次數打上0即可"})]}),(0,a.jsxs)("div",{className:"mt-2 [&>span]:text-stone-400 flex flex-col",children:[(0,a.jsx)("span",{children:"例如:今天有一個詞條為"}),(0,a.jsx)("span",{className:"!text-green-500",children:"暴擊傷害 13.4% 2"}),(0,a.jsx)("span",{children:"那麼只要key上"}),(0,a.jsx)("span",{className:"!text-green-500",children:"暴擊傷害 13.4 2"})]}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col",children:[(0,a.jsx)("span",{className:"text-white font-bold text-md",children:"注意事項:"}),(0,a.jsx)("span",{className:"text-red-500",children:"1.副詞條彼此間不能重複"}),(0,a.jsx)("span",{className:"text-red-500",children:"2.主詞條跟副詞條不可重複"})]})]})},u=function(){return(0,a.jsxs)("div",{className:"w-[300px] flex flex-col max-[600px]:my-3",children:[(0,a.jsx)("h2",{className:"text-red-600 font-bold text-lg",children:"使用說明"}),(0,a.jsxs)("ul",{className:"[&>li]:text-stone-400 list-decimal [&>li]:ml-2 max-[400px]:[&>li]:text-sm",children:[(0,a.jsx)("li",{children:"此工具主要目的是給予一些想要重洗詞條的人參考"}),(0,a.jsx)("li",{children:"翻盤機率是指說該遺器透過變量骰子後遺器分數變高的機率為何"}),(0,a.jsx)("li",{children:"目前遺器只支援計算五星遺器"}),(0,a.jsx)("li",{children:"此工具相關數據仍有更改的可能，敬請見諒!"}),(0,a.jsxs)("li",{children:["詳細的操作說明可以參考",(0,a.jsx)("a",{href:"https://home.gamer.com.tw/artwork.php?sn=6065608",className:"!underline",children:"這篇"})]})]})]})};var h=s(4167),p=s(4168),j=s(5424),v=s(9779),w=s(6806),N=s(4540),b=s(29),g=s(7654),y=s(3789);let S=function(){let e="HistoryData",[t,S]=(0,i.useState)(void 0),[_,k]=(0,i.useState)(),[O,A]=(0,i.useState)(void 0),[P,I]=(0,i.useState)(void 0),[D,H]=(0,i.useState)(null),[E,L]=(0,i.useState)(!0),R=(0,i.useRef)([]),[C,M]=(0,i.useState)([]),[J,B]=(0,i.useState)(void 0),[T,F]=(0,i.useState)(void 0),[X,$]=(0,i.useState)([]),[q,z]=(0,i.useState)(!1),G=(0,i.useRef)(!1),{showStatus:Q,updateStatus:U,hideStatus:V}=(0,w.Z)(),[W,Z]=(0,i.useState)(),K=(0,N.wA)(),Y=(0,N.d4)(e=>e.history.historyData),[ee,et]=(0,i.useState)(!1),es=["Head 頭部","Hand 手部","Body 軀幹","Feet 腳部","Ball 位面球","Rope 連結繩"],[ea,el]=(0,i.useState)(!1),[er,ei]=(0,i.useState)(!0),en=(0,n.usePathname)();(0,i.useEffect)(()=>{!function(){et(!1),K((0,b.eU)());let t=[];for(var s=0;s<=3;s++){let e={index:s,subaffix:"",data:0,count:0,stand:0,locked:!1};t.push(e)}M(t);let a=localStorage.getItem(e);if(!a||!Array.isArray(JSON.parse(a))){U("尚未有任何操作紀錄!!","default"),K((0,b.nS)([])),et(!0);return}Q("正在載入過往紀錄中......");let l=JSON.parse(a);null!=l&&l.length>0?(l=l.filter(e=>"1.5"===e.version),localStorage.setItem(e,JSON.stringify(l)),K((0,b.nS)(l)),U("先前紀錄已匯入!!","success")):U("尚未有任何操作紀錄!!","default"),et(!0)}()},[en]),(0,i.useEffect)(()=>{if(void 0!==t&&Number.isInteger(t)){let e=l.A.find(e=>e.id===t);e&&k(e.main[0])}},[t]),(0,i.useEffect)(()=>{el(!1)},[t,J,_]);let ex={charID:J,standDetails:R.current,partArr:es,historyData:Y,isChangeAble:er,selfStand:X,partsIndex:t,MainSelectOptions:_,SubData:C,relic:W,isLoad:ee,affixLock:G.current,mode:"Simulator",relicDataButton:!0,Rscore:P,Rrank:D,ExpRate:O,PieNums:T,checkDetails:function(e){let t=Y[e];H(t.rank),A(t.expRate),I(t.score),U("資料替換完畢!!","success"),F(t.pieData),Z(t.relic),R.current=t.stand,G.current=t.isLock,requestAnimationFrame(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})},deleteHistoryData:function(t){if(!confirm("確定要刪除資料嗎?"))return;K((0,b.SB)(t));let s=Y.filter((e,s)=>s!==t);setTimeout(()=>{U("成功刪除該紀錄!!","success"),localStorage.setItem(e,JSON.stringify(s))},0)},setSubData:M,setCharID:B,setIsChangeAble:ei,setIsSaveAble:el,setSelfStand:$,setPartsIndex:S,setMainSelectOptions:k};return(0,a.jsxs)(v.A.Provider,{value:ex,children:[(0,a.jsxs)("div",{className:"w-4/5 mx-auto max-[600px]:w-[95%] flex flex-row flex-wrap",children:[(0,a.jsxs)("div",{className:"flex flex-col w-2/5 bg-black/50 p-2 rounded-md max-[1200px]:w-full",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)("h1",{className:"text-red-600 font-bold text-2xl",children:"手動輸入"}),(0,a.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"SimulatorHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]}),(0,a.jsx)("div",{className:"relative ml-auto mr-1",onClick:()=>K((0,g.D1)()),children:(0,a.jsxs)("div",{className:"text-white underline cursor-pointer flex flex-row",children:[(0,a.jsx)("img",{src:"".concat("/StarRailApi","/image/breakingNews.svg"),alt:"icon"}),(0,a.jsx)("span",{children:"最新更新"})]})})]}),(0,a.jsx)("div",{className:"flex flex-row flex-wrap",children:(0,a.jsx)("div",{className:"flex flex-row flex-wrap w-1/2 max-[1200px]:w-full",children:(0,a.jsxs)("div",{className:"flex flex-col mt-2",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center [&>*]:mr-2 my-3 max-[400px]:!flex-col max-[400px]:items-start",children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-stone-400",children:"Characters 腳色:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(f.zj,{}),(0,a.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"CharHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"my-1 mt-2 [&>*]:mr-2 flex flex-row max-[400px]:!flex-col max-[400px]:items-start",children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-stone-400",children:"Parts 部位:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)(f.q2,{}),(0,a.jsx)("div",{className:"hintIcon ml-1 overflow-visible","data-tooltip-id":"PartSelectHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsxs)("div",{className:"my-1 ".concat(t?"":"hidden"," mt-2 [&>*]:mr-2 flex flex-row max-[400px]:items-start max-[400px]:!flex-col"),children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-stone-400",children:"Main 主屬性:"})}),(0,a.jsx)("div",{className:"flex flex-row items-center",children:(0,a.jsx)(f.Q2,{})})]}),(0,a.jsxs)("div",{className:"my-1 ".concat(void 0!==_&&"undefined"!==_&&void 0!==t?"":"hidden"," mt-2 [&>*]:mr-2 flex flex-row max-[600px]:!flex-col max-[600px]:text-center max-[400px]:text-left"),children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:w-full max-[600px]:text-center max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-stone-400",children:"SubAffix 副屬性:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-start justify-center",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(f.$X,{index:0}),(0,a.jsx)(f.$X,{index:1}),(0,a.jsx)(f.$X,{index:2}),(0,a.jsx)(f.$X,{index:3})]}),(0,a.jsx)("div",{className:"hintIcon ml-1 mt-1 overflow-visible","data-tooltip-id":"SubAffixHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),t?(0,a.jsxs)("div",{className:"mt-4 [&>*]:mr-2 flex flex-row items-baseline max-[400px]:!flex-col",children:[(0,a.jsx)("div",{className:"text-right w-[200px]  max-[400px]:text-left max-[600px]:w-[120px]",children:(0,a.jsx)("span",{className:"text-stone-400",children:"Affix 有效詞條:"})}),(0,a.jsx)("div",{className:"flex flex-row items-center",children:(0,a.jsx)(f.mM,{})})]}):null,0!==X.length?(0,a.jsxs)("div",{className:"mt-2 [&>*]:mr-2 flex flex-row max-[400px]:!flex-col",children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[600px]:max-w-[120px] max-[400px]:text-left",children:(0,a.jsx)("span",{className:"text-stone-400",children:"Params 參數:"})}),(0,a.jsx)(c.Q,{})]}):null,(0,a.jsxs)("div",{className:"mt-4 [&>*]:mr-2 flex flex-row items-baseline",children:[(0,a.jsx)("div",{className:"text-right w-[200px] max-[400px]:text-left max-[600px]:w-[120px]",children:(0,a.jsx)("span",{className:"text-stone-400 whitespace-nowrap",children:"Lock 是否鎖定:"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)("button",{className:"rounded-sm px-2 font-bold text-black ".concat(q?"bg-amber-500":"bg-stone-500"),onClick:()=>z(e=>!e),children:q?"啟用":"不啟用"}),(0,a.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"AffixLockHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]})]}),(0,a.jsx)("div",{className:"".concat(t?"":"hidden"," mt-2 mb-2 max-w-[400px] flex flex-row [&>*]:mr-2 justify-end max-[400px]:justify-start"),children:(0,a.jsxs)("div",{className:"flex flex-row mt-1",children:[(0,a.jsx)(y.A,{text:"計算分數",handler:()=>(function(){var e,a;let l=!1,r=JSON.parse(JSON.stringify(C));if(!J){l=!0,U("沒有選擇任何腳色!!","error");return}if(r.some((e,t)=>e.subaffix===_?(U("第".concat(t+1,"個詞條:副詞條不可選擇與主詞條相同的詞條\n請再重新選擇!!"),"error"),l=!0,!0):"undefined"!==e.subaffix&&e.subaffix?void 0:(U("您還有副詞條沒有選擇\n請再重新選擇!!","error"),l=!0,!0)),l)return;let i=new Set;for(let e of r){if(i.has(e.subaffix)){alert("副詞條之間不可以選擇重複\n請再重新選擇!!"),l=!0;return}i.add(e.subaffix)}if(l)return;let n=r.some(e=>"spd"===e.subaffix)?.5*(null!=(a=null==(e=X.find(e=>"速度"===e.name))?void 0:e.value)?a:0):0;q?(r.forEach(e=>{"速度"!==e.subaffix&&0!==e.count&&(n+=.2);let t=X.find(t=>t.name===e.subaffix);e.stand=t?t.value:0}),r.reduce((e,t)=>t.stand<e.stand?t:e).locked=!0):r.forEach(e=>e.locked=!1);let x=new Worker(s.tu(new URL(s.p+s.u(63),s.b))),c={charID:J,MainData:_,SubData:r,partsIndex:t,standard:X,deviation:n};el(!1),L(!1),ei(!1),Q("數據計算處理中!!"),A(void 0),H(null),F(void 0),I(void 0),Z(void 0),x.postMessage(c),x.onmessage=function(e){let s,a;A(e.data.expRate),I(e.data.relicscore),U("計算完畢!!","success"),F(e.data.returnData),H(e.data.relicrank),R.current=X,G.current=q,s={main_affix:_,subaffix:[],type:0,affixLock:!1},(a=JSON.parse(JSON.stringify(r))).forEach(e=>{["生命值","攻擊力","防禦力","速度"].includes(e.subaffix)?e.display=e.data.toString():e.display=e.data.toString()+"%"}),s.subaffix=JSON.parse(JSON.stringify(a)),s.type=t,s.affixLock=G.current,Z(s),M(a),L(!0),el(!0),ei(!0),requestAnimationFrame(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})}})(),disabled:!er}),(0,a.jsx)(y.A,{text:"儲存紀錄",handler:()=>(function(){let s=es[t-1],a=r.A.find(e=>e.charID===J);if(Y?Y.length>=6&&K((0,b._0)()):K((0,b.nS)([])),!T||void 0===O||!D||void 0===P)return void U("當前沒有任何數據，不予儲存!!","error");if(!J)return void U("沒有選擇任何腳色!!","error");W.type=t;let l={version:"1.5",char:a,part:s,mainaffix:_,expRate:O,score:P,rank:D,pieData:T,stand:R.current,relic:W,isLock:G.current},i=JSON.parse(JSON.stringify(null!=Y?Y:[]));i.push(l),K((0,b.Gs)(l)),U("已儲存","success");let n=document.getElementById("historyData");n&&n.scrollIntoView({behavior:"smooth"}),localStorage.setItem(e,JSON.stringify(i)),el(!1)})(),disabled:!ea})]})})]})})})]}),(0,a.jsxs)("div",{className:"w-[55%] ml-2 bg-black/50 rounded-md p-2 h-fit max-[1200px]:w-full max-[1200px]:ml-0 max-[1200px]:mt-2",id:"historyData",children:[(0,a.jsxs)("div",{className:"flex flex-row items-baseline px-2 max-[600px]:justify-center",children:[(0,a.jsx)("span",{className:"text-red-600 text-lg font-bold",children:"過往紀錄"}),(0,a.jsx)("div",{className:"hintIcon ml-2 overflow-visible","data-tooltip-id":"HistoryHint",children:(0,a.jsx)("span",{className:"text-white",children:"?"})})]}),(0,a.jsx)("div",{className:"flex flex-row flex-wrap h-max max-h-[300px] overflow-y-scroll hiddenScrollBar max-[600px]:!flex-col max-[600px]:!flex-nowrap max-[600px]:items-center",children:(0,a.jsx)(o.a,{})})]}),T?(0,a.jsx)("div",{className:"flex flex-row my-3 flex-wrap shadowBox bg-black/50 w-full p-2 rounded-md",children:(0,a.jsxs)("div",{className:"w-full flex flex-row flex-wrap",children:[(0,a.jsx)("div",{className:"flex flex-row flex-wrap w-[18vw]  max-[700px]:w-[50%] max-[500px]:w-4/5 max-[500px]:mx-auto",children:(0,a.jsx)(d.v,{})}),(0,a.jsx)("div",{className:"w-1/4 max-[700px]:w-[50%] max-[500px]:w-4/5 max-[500px]:mx-auto",children:(0,a.jsx)(c.V,{})}),(0,a.jsx)("div",{className:"flex flex-row flex-wrap w-1/2 max-[700px]:w-full max-[500px]:w-4/5 max-[500px]:mx-auto ",id:"resultDetails",children:(0,a.jsx)(x.A,{})})]})}):null]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(j.m_,{id:"CharHint",place:"right-start",render:()=>(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-white",children:"選擇指定腳色，可以使用中文或英文關鍵字"}),(0,a.jsx)("span",{className:"text-white",children:"例如:Jingliu→鏡流"})]})}),(0,a.jsx)(j.m_,{id:"PartSelectHint",place:"right-start",render:()=>(0,a.jsxs)("div",{className:"flex flex-col max-w-[230px]",children:[(0,a.jsx)("span",{className:"text-white",children:"選擇遺器部位"}),(0,a.jsx)("span",{className:"text-white",children:'"主詞條"跟"副詞條"區塊中會自動帶入該部位詞條種類'})]})}),(0,a.jsx)(j.m_,{id:"SubAffixHint",place:"right-start",render:()=>(0,a.jsx)(m,{})}),(0,a.jsx)(j.m_,{id:"HistoryHint",place:"top-start",render:()=>(0,a.jsx)(h.A,{})}),(0,a.jsx)(j.m_,{id:"SimulatorHint",place:"right-start",render:()=>(0,a.jsx)(u,{}),clickable:!0}),(0,a.jsx)(j.m_,{id:"AffixLockHint",place:"right-start",style:{zIndex:10},render:()=>(0,a.jsx)(p.A,{})})]})]})}},7828:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,s(4054).createAsyncLocalStorage)()}},e=>{var t=t=>e(e.s=t);e.O(0,[8,60,935,388,994,874,329,911,441,684,358],()=>t(3752)),_N_E=e.O()}]);