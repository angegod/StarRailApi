{"version":3,"file":"static/js/31.0b83611f.chunk.js","mappings":"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","sources":["worker/worker.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["import standard from '../data/standard';\r\nimport weight from '../data/weight';\r\nimport AffixName from '../data/AffixName';\r\nimport {findCombinations,EnchanceAllCombinations} from '../data/combination';\r\n\r\n\r\nonmessage = function (event) {\r\n    //宣告變數\r\n    let SubData=event.data.SubData;\r\n    let partsIndex=parseInt(event.data.partsIndex);\r\n    let MainAffix=AffixName.find((a)=>a.name===event.data.MainData);\r\n    let deviation=(event.data.deviation!==undefined)?event.data.deviation:0;\r\n    \r\n\r\n    //計算可用強化次數\r\n    var enchanceCount=0;\r\n    SubData.forEach(sb=>{    \r\n        enchanceCount=enchanceCount+Number(sb.count);\r\n    });\r\n\r\n\r\n    //計算可能的強化組合\r\n    let combination=findCombinations(enchanceCount,SubData.filter((s)=>!s.locked).length);\r\n\r\n    let charStandard=calStand(event.data.standard);\r\n    //分數誤差 目前先預設少半個有效詞條\r\n\r\n    let coeEfficent=[];//當前遺器係數arr\r\n    SubData.forEach((sub)=>{\r\n        let SubAffixType=AffixName.find((s)=>s.name===sub.subaffix);\r\n        coeEfficent.push({\r\n            type:SubAffixType.type,\r\n            fieldName:SubAffixType.fieldName,\r\n            num:Number(charStandard[SubAffixType.type]),\r\n            locked:(sub.locked)?true:false\r\n        });\r\n    });\r\n\r\n    //將沒有被鎖住不可計算的詞條倒裝\r\n    //coeEfficent.sort((a,b)=>)\r\n\r\n    let MainData=charStandard[MainAffix.type];\r\n    let result =[];\r\n    let origin=relicScore(partsIndex,charStandard,SubData,MainData);\r\n    //先算原本的遺器的分數\r\n\r\n    let p1=new Promise(async (resolve,reject)=>{\r\n        combination.forEach((c,i)=>{\r\n            //計算各種強化程度的組合\r\n            let subcombination=EnchanceAllCombinations(c);\r\n\r\n            subcombination.forEach((s)=>{\r\n                let res=0;\r\n                if(partsIndex!==1&&partsIndex!==2)\r\n                    res=3*MainData;\r\n                \r\n                let total=0;\r\n                let caltype=[];//已經計算過的詞條種類\r\n\r\n                s.forEach((el,i) => {//對每個屬性詞條開始進行模擬計算\r\n                    let sub=coeEfficent[i];\r\n                    \r\n                    let targetRange=AffixName.find((st)=>st.fieldName===sub.fieldName).range;\r\n\r\n                    //如果該詞條所獲得的強化次數為0 可以推測該數值為初始詞條數值 則直接繼承使用\r\n                    if(SubData[i].count===0)\r\n                        total=SubData[i].data;\r\n                    else\r\n                        total=targetRange[1];//詞條模擬出來的總和，初始為最中間的值\r\n                    \r\n                    el.forEach((num)=>total+=targetRange[num]);\r\n\r\n                    //計算有效詞條數\r\n                    let affixStandard=standard.find((t)=>t.type==='sub').data.find((d)=>d.name===sub.fieldName).data;\r\n                    let cal=parseFloat(total/affixStandard).toFixed(2);\r\n\r\n                    //獲得加權有效詞條數 並加上去\r\n                    let affixmutl=parseFloat(charStandard[sub.type]*cal);\r\n                    \r\n                    \r\n                    //如果沒有計算過此種類詞條\r\n                    caltype.push({\r\n                        type:sub.fieldName,\r\n                        affixmutl:affixmutl\r\n                    });    \r\n                    \r\n                });\r\n\r\n                caltype.forEach((ms)=>{\r\n                    if(ms.type!=='AttackDelta'&&ms.type!=='DefenceDelta'&&ms.type!=='HPDelta')\r\n                        res+=ms.affixmutl;\r\n                });\r\n                \r\n\r\n                //理想分數\r\n                let IdealyScore=Number((parseFloat(res/calPartWeights(charStandard,partsIndex))*100).toFixed(2));\r\n                result.push(IdealyScore);\r\n                \r\n            });\r\n        });\r\n\r\n        resolve(origin);\r\n    })\r\n\r\n    p1.then((score)=>{\r\n        //設立分數標準\r\n        let scoreStand=[\r\n            {rank:'S+',stand:85,color:'rgb(239, 68, 68)',tag:'S+'},\r\n            {rank:'S',stand:70,color:'rgb(239, 68, 68)',tag:'S'},\r\n            {rank:'A',stand:50,color:'rgb(234, 179, 8)',tag:'A'},\r\n            {rank:'B',stand:35,color:'rgb(234, 88 , 12)',tag:'B'},\r\n            {rank:'C',stand:15,color:'rgb(163, 230, 53)',tag:'C'},\r\n            {rank:'D',stand:0 ,color:'rgb(22,163,74)',tag:'D'}\r\n        ];\r\n        let overScoreList=JSON.parse(JSON.stringify(result)).filter((num)=>num-deviation>Number(origin));\r\n        let expRate=(overScoreList.length)/(result.length).toFixed(2);\r\n        let copy=JSON.parse(JSON.stringify(result));\r\n        let relicrank=undefined;\r\n        let returnData=[]\r\n        \r\n        //console.log(result);\r\n        //根據標準去分類\r\n        scoreStand.forEach((stand,i)=>{\r\n            //區分符合區間跟不符合的 並一步步拿掉前面篩選過的區間\r\n            let match=copy.filter((num)=>num>=stand.stand);\r\n            copy=copy.filter((num)=>num<stand.stand);\r\n\r\n            returnData.push({\r\n                label:stand.tag,\r\n                value:Number((parseFloat(match.length/result.length)*100).toFixed(2)),\r\n                color:stand.color,\r\n                tag:stand.rank\r\n            });\r\n\r\n\r\n            //接著去找尋這個分數所屬的區間\r\n            if(stand.stand<=origin&&relicrank===undefined)\r\n                relicrank=stand;\r\n\r\n        });\r\n\r\n        /*\r\n        //如果區間數量為0 則不予顯示\r\n        returnData=returnData.filter((r)=>r.value>0);*/\r\n        this.postMessage({\r\n            expRate:expRate,//期望值\r\n            relicscore:score,//遺器分數\r\n            relicrank:relicrank,//遺器區間\r\n            returnData:returnData//區間機率        \r\n        })\r\n        \r\n    });\r\n};\r\n\r\nfunction relicScore(partsIndex,charStandard,SubData,MainData){\r\n    let weight = 0\r\n    var mutl=3*MainData;//直接默認強化至滿等\r\n    let caltype=[];\r\n\r\n    //如果是手跟頭則不套用主詞條加分\r\n    if(partsIndex!==1&&partsIndex!==2){\r\n        weight+=mutl;\r\n    }\r\n    SubData.forEach(a => {\r\n        //去除%數\r\n        var affix=parseFloat(a.data).toFixed(2);//實際數值\r\n        let SubAffixType=AffixName.find((s)=>s.name===a.subaffix);\r\n        \r\n        //計算有效詞條數\r\n        var affixStandard=standard.find((t)=>t.type==='sub').data.find((d)=>d.name===SubAffixType.fieldName).data;\r\n        var cal=parseFloat(affix/affixStandard).toFixed(2);\r\n        \r\n        //獲得有效詞條\r\n        let affixmutl=parseFloat(charStandard[SubAffixType.type]*cal);\r\n        //let smallAffix=caltype.find((ct)=>ct.type===SubAffixType.type);\r\n\r\n        caltype.push({\r\n            type:SubAffixType.fieldName,\r\n            affixmutl:affixmutl,\r\n        })\r\n       \r\n    });\r\n    //計算這件遺器的最大有效詞條數\r\n    //console.log(calPartWeights(charStandard,partsIndex));\r\n    //計算分數\r\n    caltype.forEach((ms)=>{\r\n        if(ms.type!=='AttackDelta'&&ms.type!=='DefenceDelta'&&ms.type!=='HPDelta')\r\n            weight+=ms.affixmutl;\r\n    });\r\n\r\n    let relicscore=0;\r\n\r\n    //接下來根據部位調整分數\r\n    //假設最大有效詞條數為10 實際只拿8個 代表你這件有80分以上的水準\r\n    relicscore=parseFloat(weight/calPartWeights(charStandard,partsIndex))*100;\r\n    return parseFloat(relicscore).toFixed(1);\r\n    \r\n}\r\n\r\n//計算裝備權重\r\nfunction calPartWeights(charstandard,partIndex){\r\n    let partWeight = 5;//起始分數為5\r\n    let mainkey='';\r\n   \r\n    //先將標準倒序\r\n    charstandard=Object.entries(charstandard)\r\n    .sort((a, b) => b[1] - a[1]);\r\n\r\n    //主詞條 抓最大*3 剩下依序遞補 最多四個\r\n    //頭跟手會跳過\r\n    if(partIndex!==1&&partIndex!==2){\r\n\r\n        charstandard.forEach(([key,value])=>{\r\n            let unique=!weight[partIndex].sub.includes(key);\r\n            //要優先計算只出現在主詞條的\r\n            if(weight[partIndex].main.includes(key)&&mainkey===''&&unique&&value!==0){\r\n                mainkey=key;\r\n                partWeight=partWeight+value*3;\r\n            }\r\n        });\r\n\r\n        if(mainkey===''){\r\n            charstandard.forEach(([key,value])=>{\r\n                if(weight[partIndex].main.includes(key)&&mainkey===''){\r\n                    mainkey=key;\r\n                    partWeight=partWeight+value*3;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    //計算副詞條最大權重 最多計入四個\r\n    let calcount=0\r\n    charstandard.forEach(([key,value])=>{\r\n        if(key!==mainkey && calcount<4 && weight[partIndex].sub.includes(key)){\r\n            partWeight=partWeight+value;\r\n            calcount+=1;\r\n        }\r\n    });\r\n    return partWeight;\r\n}\r\n\r\n//製作標準\r\nfunction calStand(stand){\r\n\r\n    //設立一個模板 根據使用者填入參數更改\r\n    let model={\r\n        hp: 0,\r\n        atk: 0,\r\n        def: 0,\r\n        spd: 0,\r\n        crit_rate: 0,\r\n        crit_dmg: 0,\r\n        break_dmg: 0,\r\n        heal_rate: 0,\r\n        sp_rate: 0,\r\n        effect_hit: 0,\r\n        effect_res: 0,\r\n        physical_dmg: 0,\r\n        fire_dmg: 0,\r\n        ice_dmg: 0,\r\n        lightning_dmg: 0,\r\n        wind_dmg: 0,\r\n        quantum_dmg: 0,\r\n        imaginary_dmg: 0\r\n    };\r\n\r\n    //根據有效詞條關鍵字\r\n    stand.forEach((s)=>{\r\n        let target=AffixName.find((a)=>a.name===s.name).type;\r\n        model[target]=parseFloat(s.value);\r\n    });\r\n\r\n    return model;\r\n}\r\n\r\n//計算將會移置後台worker運作\r\n\r\n//所需資料\r\n//2.遺器本身數據(SubData) 3.遺器部位\r\n\r\n//回傳資料\r\n//1.遺器本身分數 2.期望值  ","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [517], function() { return __webpack_require__(269); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"d01bc76a\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/StarRailApi/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t31: 1,\n\t269: 1,\n\t650: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkapi\"] = self[\"webpackChunkapi\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn __webpack_require__.e(517).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["calPartWeights","charstandard","partIndex","partWeight","mainkey","Object","entries","sort","a","b","forEach","_ref2","_ref3","_slicedToArray","key","value","unique","weight","sub","includes","main","_ref4","_ref5","calcount","_ref6","_ref7","onmessage","event","_this","SubData","data","partsIndex","parseInt","MainAffix","AffixName","find","name","MainData","deviation","undefined","enchanceCount","sb","Number","count","combination","findCombinations","filter","s","locked","length","charStandard","stand","model","hp","atk","def","spd","crit_rate","crit_dmg","break_dmg","heal_rate","sp_rate","effect_hit","effect_res","physical_dmg","fire_dmg","ice_dmg","lightning_dmg","wind_dmg","quantum_dmg","imaginary_dmg","target","type","parseFloat","calStand","standard","coeEfficent","SubAffixType","subaffix","push","fieldName","num","result","origin","mutl","caltype","affix","toFixed","affixStandard","t","d","cal","affixmutl","ms","relicscore","relicScore","p1","Promise","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resolve","reject","wrap","_context","prev","next","c","i","EnchanceAllCombinations","res","total","el","targetRange","st","range","IdealyScore","stop","_x","_x2","apply","arguments","then","score","expRate","JSON","parse","stringify","copy","relicrank","returnData","rank","color","tag","match","label","postMessage","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","x","__webpack_exports__","O","deferred","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","splice","r","definition","o","defineProperty","enumerable","get","f","e","chunkId","all","reduce","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","call","p","installedChunks","importScripts","chunkLoadingGlobal","self","parentChunkLoadingFunction","bind","moreModules","runtime","pop"],"sourceRoot":""}