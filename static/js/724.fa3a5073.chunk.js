!function(){"use strict";var n={343:function(n,t,r){var e=r(453),a=r(675),o=r(467),i=r(312),u=r(829),f=r(344),c=r(357);function s(n,t){var r=5,a="";n=Object.entries(n).sort((function(n,t){return t[1]-n[1]})),1!==t&&2!==t&&(n.forEach((function(n){var o=(0,e.A)(n,2),i=o[0],f=o[1],c=!u.A[t].sub.includes(i);u.A[t].main.includes(i)&&""===a&&c&&0!==f&&(a=i,r+=3*f)})),""===a&&n.forEach((function(n){var o=(0,e.A)(n,2),i=o[0],f=o[1];u.A[t].main.includes(i)&&""===a&&(a=i,r+=3*f)})));var o=0;return n.forEach((function(n){var i=(0,e.A)(n,2),f=i[0],c=i[1];f!==a&&o<4&&u.A[t].sub.includes(f)&&(r+=c,o+=1)})),r}onmessage=function(n){var t=this,r=n.data.SubData,e=parseInt(n.data.partsIndex),u=f.A.find((function(t){return t.name===n.data.MainData})),d=0;r.forEach((function(n){d+=Number(n.count)}));var l=(0,c.W)(d,r.filter((function(n){return!n.locked})).length),p=Math.floor(Math.random()*l.length),h=function(n){var t={hp:0,atk:0,def:0,spd:0,crit_rate:0,crit_dmg:0,break_dmg:0,heal_rate:0,sp_rate:0,effect_hit:0,effect_res:0,physical_dmg:0,fire_dmg:0,ice_dmg:0,lightning_dmg:0,wind_dmg:0,quantum_dmg:0,imaginary_dmg:0};return n.forEach((function(n){var r=f.A.find((function(t){return t.name===n.name})).type;t[r]=parseFloat(n.value)})),t}(n.data.standard),m=[];r.forEach((function(n){var t=f.A.find((function(t){return t.name===n.subaffix}));m.push({type:t.type,fieldName:t.fieldName,num:Number(h[t.type]),locked:!!n.locked})}));var v=h[u.type],g=0,b=new Promise(function(){var n=(0,o.A)((0,a.A)().mark((function n(t,o){var u,d,b,k,x,y,A,_;return(0,a.A)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u=l[p],d=(0,c.$)(u),b=Math.floor(Math.random()*d.length),k=d[b],x=0,1!==e&&2!==e&&(x=3*v),y=[],A=[],k.forEach((function(n,t){var e=0,a=m[t],o=f.A.find((function(n){return n.fieldName===a.fieldName})).range;e=0===r[t].count?r[t].data:o[1],n.forEach((function(n){return e+=o[n]}));var c=i.A.find((function(n){return"sub"===n.type})).data.find((function(n){return n.name===a.fieldName})).data,s=parseFloat(e/c).toFixed(2),d=parseFloat(h[a.type]*s);y.push({type:a.fieldName,affixmutl:d}),A.push({index:A.length,subaffix:r[t].subaffix,data:parseFloat(e.toFixed(1)),count:u[t]})})),y.forEach((function(n){"AttackDelta"!==n.type&&"DefenceDelta"!==n.type&&"HPDelta"!==n.type&&(x+=n.affixmutl)})),_=Number((100*parseFloat(x/s(h,e))).toFixed(2)),g=_,t(A);case 13:case"end":return n.stop()}}),n)})));return function(t,r){return n.apply(this,arguments)}}());b.then((function(n){var r=[{rank:"S+",stand:85,color:"rgb(239, 68, 68)",tag:"S+"},{rank:"S",stand:70,color:"rgb(239, 68, 68)",tag:"S"},{rank:"A",stand:50,color:"rgb(234, 179, 8)",tag:"A"},{rank:"B",stand:35,color:"rgb(234, 88 , 12)",tag:"B"},{rank:"C",stand:15,color:"rgb(163, 230, 53)",tag:"C"},{rank:"D",stand:0,color:"rgb(22,163,74)",tag:"D"}];r.reverse();var e=void 0,a=!0;r.forEach((function(n,t){g<n.stand&&a&&0!==t&&(a=!1,e=r[t-1]),t===r.length-1&&a&&(a=!1,e=r[t]),n.stand<=origin&&void 0===e&&(e=n)})),t.postMessage({relicscore:Number(g.toFixed(1)),relicrank:e,returnData:n})}))}}},t={};function r(e){var a=t[e];if(void 0!==a)return a.exports;var o=t[e]={exports:{}};return n[e](o,o.exports,r),o.exports}r.m=n,r.x=function(){var n=r.O(void 0,[517],(function(){return r(343)}));return n=r.O(n)},function(){var n=[];r.O=function(t,e,a,o){if(!e){var i=1/0;for(s=0;s<n.length;s++){e=n[s][0],a=n[s][1],o=n[s][2];for(var u=!0,f=0;f<e.length;f++)(!1&o||i>=o)&&Object.keys(r.O).every((function(n){return r.O[n](e[f])}))?e.splice(f--,1):(u=!1,o<i&&(i=o));if(u){n.splice(s--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var s=n.length;s>0&&n[s-1][2]>o;s--)n[s]=n[s-1];n[s]=[e,a,o]}}(),r.d=function(n,t){for(var e in t)r.o(t,e)&&!r.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},r.f={},r.e=function(n){return Promise.all(Object.keys(r.f).reduce((function(t,e){return r.f[e](n,t),t}),[]))},r.u=function(n){return"static/js/"+n+".d01bc76a.chunk.js"},r.miniCssF=function(n){},r.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},r.p="/StarRailApi/",function(){var n={343:1,724:1};r.f.i=function(t,e){n[t]||importScripts(r.p+r.u(t))};var t=self.webpackChunkapi=self.webpackChunkapi||[],e=t.push.bind(t);t.push=function(t){var a=t[0],o=t[1],i=t[2];for(var u in o)r.o(o,u)&&(r.m[u]=o[u]);for(i&&i(r);a.length;)n[a.pop()]=1;e(t)}}(),function(){var n=r.x;r.x=function(){return r.e(517).then(n)}}();r.x()}();
//# sourceMappingURL=724.fa3a5073.chunk.js.map